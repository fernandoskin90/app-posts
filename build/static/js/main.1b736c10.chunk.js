(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(n,e,t){n.exports=t(37)},37:function(n,e,t){"use strict";t.r(e);var a=t(0),r=t.n(a),o=t(20),c=t.n(o),i=t(11),u=t(8),l=t(3),s=t(1),p=t(2);function d(){var n=Object(s.a)(["\n  font-style: italic;\n"]);return d=function(){return n},n}function f(){var n=Object(s.a)(["\n  font-weight: bold;\n"]);return f=function(){return n},n}function m(){var n=Object(s.a)(["\n  border: 1px gray solid;\n  box-shadow: 2px 2px 10px 2px lightgray;\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  padding: 10px;\n"]);return m=function(){return n},n}var h=p.a.div(m()),b=p.a.div(f()),g=p.a.div(d()),v=function(n){var e=n.body,t=n.title;return r.a.createElement(h,null,r.a.createElement(b,null,t),r.a.createElement(g,null,e))},x=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};window.localStorage.setItem("posts_app_token",n),e()},j=function(){return window.localStorage.getItem("posts_app_token")},O=function(){var n=Object(a.useState)(!1),e=Object(l.a)(n,2),t=e[0],r=e[1],o=Object(a.useState)(!1),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(a.useState)(!0),p=Object(l.a)(s,2),d=p[0],f=p[1];return Object(a.useEffect)(function(){var n=j();n?fetch("https://stormy-ocean-53996.herokuapp.com/user/authByToken",{method:"POST",headers:{Authorization:"Bearer ".concat(n)}}).then(function(n){return n.json()}).then(function(n){var e=n.data;u(!!e&&e.userValid),f(!1)}).catch(function(n){console.error(n),r(!0)}):(f(!1),r(!0))},[]),{error:t,loading:d,userValid:i}};function E(){var n=Object(s.a)(["\n  background-color: tomato;\n  border-radius: 20px;\n  bottom: 32px;\n  color: #FFF;\n  cursor: pointer;\n  font-size: 1.1rem;\n  position: fixed;\n  right: 32px;\n"]);return E=function(){return n},n}function y(){var n=Object(s.a)(["\n  display: grid;\n  grid-gap: 10px;\n  grid-template-columns: repeat(auto-fill, 300px);\n  grid-template-rows: repeat(auto-fill, 1fr);\n  height: calc(100vh - 60px);\n  overflow-y: auto;\n  padding: 20px;\n"]);return y=function(){return n},n}var w=p.a.div(y()),k=p.a.button(E()),S=function(n){var e=n.history,t=Object(a.useState)(!1),o=Object(l.a)(t,2),c=o[0],i=o[1],s=Object(a.useState)([]),p=Object(l.a)(s,2),d=p[0],f=p[1],m=O(),h=m.error,b=m.loading,g=m.userValid;return Object(a.useEffect)(function(){g&&(i(!0),fetch("https://stormy-ocean-53996.herokuapp.com/posts",{headers:{Authorization:"Bearer ".concat(j()),Accept:"application/json","Content-Type":"application/json"}}).then(function(n){return n.json()}).then(function(n){var e=n.data;n.message,i(!1),f(e)}).catch(function(n){console.warn(n)}))},[g]),h?r.a.createElement(u.a,{to:"/login"}):b||c?r.a.createElement("h1",null,"Loading ..."):r.a.createElement(w,null,d.map(function(n,e){var t=n.body,a=n.title;return r.a.createElement(v,{body:t,key:"post-".concat(e),title:a})}),r.a.createElement(k,{onClick:function(){!function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};window.localStorage.removeItem("posts_app_token"),n()}(function(){e.push("/login")})}},"Logout"))};function C(){var n=Object(s.a)(["\n  color: tomato;\n  font-size: 1rem;\n  text-align: center;\n"]);return C=function(){return n},n}function T(){var n=Object(s.a)(["\n  animation: "," 1.5s linear infinite;\n  border: 3px tomato solid;\n  border-right: 3px transparent solid;\n  border-radius: 50%;\n  bottom: 35px;\n  height: 15px;\n  position: absolute;\n  right: 45px;\n  width: 15px;\n"]);return T=function(){return n},n}function _(){var n=Object(s.a)(["\n  margin: 5px auto;\n  max-width: 100px;\n"]);return _=function(){return n},n}function z(){var n=Object(s.a)(["\n  margin: 5px auto;\n"]);return z=function(){return n},n}function A(){var n=Object(s.a)(["\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  height: calc(100vh - 20px);\n"]);return A=function(){return n},n}function B(){var n=Object(s.a)(["\n  justify-content: center;\n  border: 1px solid grey;\n  box-shadow: 2px 2px 5px 2px gray;\n  display: flex;\n  flex-direction: column;\n  height: 150px;\n  position: relative;\n  width: 200px;\n"]);return B=function(){return n},n}function L(){var n=Object(s.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return L=function(){return n},n}var P=Object(p.b)(L()),V=p.a.div(B()),I=p.a.div(A()),J=p.a.input(z()),N=p.a.button(_()),F=p.a.div(T(),P),W=p.a.div(C()),R=function(n){var e=n.history,t=Object(a.useState)(!1),o=Object(l.a)(t,2),c=o[0],i=o[1],s=Object(a.useState)(""),p=Object(l.a)(s,2),d=p[0],f=p[1],m=Object(a.useState)(""),h=Object(l.a)(m,2),b=h[0],g=h[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),E=j[0],y=j[1],w=O(),k=w.loading,S=w.userValid;return k?r.a.createElement("div",null,"Loading ..."):S?r.a.createElement(u.a,{to:"/"}):r.a.createElement(I,null,r.a.createElement(V,null,r.a.createElement(J,{onChange:function(n){return f(n.target.value)},placeholder:"Email",value:d}),r.a.createElement(J,{onChange:function(n){return g(n.target.value)},placeholder:"Password",type:"password",value:b}),r.a.createElement(N,{disabled:!d||!b||c,onClick:function(){i(!0),y(""),fetch("https://stormy-ocean-53996.herokuapp.com/user/login",{body:JSON.stringify({email:d,password:b}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(n){return n.json()}).then(function(n){var t=n.data,a=n.message;i(!1),t&&t.token&&x(t.token,function(){return e.push("/")}),!t&&a&&y(a)}).catch(function(n){console.warn(n)})}},"Login"),c&&r.a.createElement(F,null),r.a.createElement(N,{onClick:function(){return e.push("/register")}},"To register"),r.a.createElement(W,null,E)))};function U(){var n=Object(s.a)(["\n  color: tomato;\n  font-size: 1rem;\n  text-align: center;\n"]);return U=function(){return n},n}function $(){var n=Object(s.a)(["\n  animation: "," 1.5s linear infinite;\n  border: 3px tomato solid;\n  border-right: 3px transparent solid;\n  border-radius: 50%;\n  bottom: 35px;\n  height: 15px;\n  position: absolute;\n  right: 45px;\n  width: 15px;\n"]);return $=function(){return n},n}function q(){var n=Object(s.a)(["\n  margin: 5px auto;\n  max-width: 100px;\n"]);return q=function(){return n},n}function D(){var n=Object(s.a)(["\n  margin: 5px auto;\n"]);return D=function(){return n},n}function G(){var n=Object(s.a)(["\n  align-items: center;\n  justify-content: center;\n  display: flex;\n  height: calc(100vh - 20px);\n"]);return G=function(){return n},n}function H(){var n=Object(s.a)(["\n  justify-content: center;\n  border: 1px solid grey;\n  box-shadow: 2px 2px 5px 2px gray;\n  display: flex;\n  flex-direction: column;\n  height: 250px;\n  position: relative;\n  width: 250px;\n"]);return H=function(){return n},n}function K(){var n=Object(s.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return K=function(){return n},n}var M=Object(p.b)(K()),Q=p.a.div(H()),X=p.a.div(G()),Y=p.a.input(D()),Z=p.a.button(q()),nn=p.a.div($(),M),en=p.a.div(U()),tn=function(n){var e=n.history,t=Object(a.useState)(!1),o=Object(l.a)(t,2),c=o[0],i=o[1],s=Object(a.useState)(""),p=Object(l.a)(s,2),d=p[0],f=p[1],m=Object(a.useState)(""),h=Object(l.a)(m,2),b=h[0],g=h[1],v=Object(a.useState)(""),j=Object(l.a)(v,2),E=j[0],y=j[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),S=k[0],C=k[1],T=Object(a.useState)(""),_=Object(l.a)(T,2),z=_[0],A=_[1],B=O(),L=B.loading,P=B.userValid;return L?r.a.createElement("div",null,"Loading ..."):P?r.a.createElement(u.a,{to:"/"}):r.a.createElement(X,null,r.a.createElement(Q,null,r.a.createElement(Y,{onChange:function(n){return y(n.target.value)},placeholder:"Name",value:E}),r.a.createElement(Y,{onChange:function(n){return C(n.target.value)},placeholder:"Username",value:S}),r.a.createElement(Y,{onChange:function(n){return f(n.target.value)},placeholder:"Email",value:d}),r.a.createElement(Y,{onChange:function(n){return g(n.target.value)},placeholder:"Password",type:"password",value:b}),r.a.createElement(Z,{disabled:!d||!b||!E||!S||c,onClick:function(){i(!0),A(""),fetch("https://stormy-ocean-53996.herokuapp.com/user/register",{body:JSON.stringify({email:d,name:E,password:b,userName:S}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(n){return n.json()}).then(function(n){var t=n.data,a=n.message;i(!1),t&&t.token&&x(t.token,function(){return e.push("/")}),!t&&a&&A(a)}).catch(function(n){console.warn(n)})}},"Register"),c&&r.a.createElement(nn,null),r.a.createElement(Z,{onClick:function(){return e.push("/login")}},"To login"),r.a.createElement(en,null,z)))},an=function(){return r.a.createElement(i.a,{basename:"/"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/login",component:R}),r.a.createElement(u.b,{exact:!0,path:"/register",component:tn}),r.a.createElement(u.b,{exact:!0,path:"/",component:S}),r.a.createElement(u.b,{render:function(){return r.a.createElement(u.a,{to:"/"})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(an,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[27,1,2]]]);
//# sourceMappingURL=main.1b736c10.chunk.js.map